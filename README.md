# Claude API Project

This project contains a simple Flask-based API (`claude_api.py`) and a script (`run_claude.sh`) to run it and expose it publicly using ngrok.

## Features

-   **Task Management API:**
    -   `GET /tasks`: Retrieves the current list of tasks.
    -   `POST /add_task`: Adds a new task. Expects a JSON payload like `{"from": "user", "task": "your task description"}`.
    -   `GET /health`: A health check endpoint that returns `{"status": "OK"}` if the API is running.
-   **Logging:** The API includes request, response, and error logging.
-   **Automated Startup:** The `run_claude.sh` script automates the process of starting the API and ngrok.

## Prerequisites

Before running the project, ensure you have the following installed:

1.  **Python 3:** The API is written in Python.
    -   You can download it from [python.org](https://www.python.org/downloads/).
2.  **Flask:** The Python web framework used for the API.
    -   Install it using pip: `pip install Flask`
3.  **ngrok:** A tool to create secure tunnels to localhost.
    -   Download it from [ngrok.com](https://ngrok.com/download).
    -   Ensure ngrok is in your system's PATH or modify `run_claude.sh` to point to the ngrok executable.
    -   You'll also need to authenticate ngrok if you haven't already: `ngrok authtoken YOUR_AUTH_TOKEN` (get your token from the ngrok dashboard).
4.  **jq (optional but recommended):** A command-line JSON processor used by `run_claude.sh` for reliably getting the ngrok URL.
    -   On Debian/Ubuntu: `sudo apt-get install jq`
    -   On macOS (using Homebrew): `brew install jq`
    -   If `jq` is not available, the script will attempt to parse the ngrok log file, which might be less reliable.

## How to Run

1.  **Clone the repository (if applicable) or ensure you have `claude_api.py` and `run_claude.sh` in the same directory.**

2.  **Make the script executable (if you haven't already):**
    ```bash
    chmod +x run_claude.sh
    ```

3.  **Run the script:**
    ```bash
    ./run_claude.sh
    ```

    The script will:
    -   Start the `claude_api.py` Flask application on `http://0.0.0.0:5000`.
    -   Start ngrok to expose port 5000 to the internet.
    -   Attempt to retrieve the public ngrok URL.
    -   Save the public ngrok URL to a file named `ngrok_url.txt`.
    -   Print the ngrok URL to the console.

4.  **Access the API:**
    -   You can find the public URL in `ngrok_url.txt` or in the console output.
    -   Use this URL to access the API endpoints (e.g., `YOUR_NGROK_URL/tasks`, `YOUR_NGROK_URL/health`).

5.  **Stopping the services:**
    -   Press `Ctrl+C` in the terminal where `run_claude.sh` is running. The script will attempt to stop both the Flask API and ngrok.

## Files

-   `claude_api.py`: The Flask API source code.
-   `run_claude.sh`: Script to start the API and ngrok.
-   `ngrok_url.txt`: (Generated by `run_claude.sh`) Contains the public ngrok URL.
-   `ngrok.log`: (Generated by `run_claude.sh`) Contains logs from the ngrok process.
-   `README.md`: This file.

## Troubleshooting

-   **ngrok URL not found:**
    -   Ensure ngrok is installed, authenticated, and accessible in your PATH.
    -   Check the `ngrok.log` file for errors.
    -   You can also check the ngrok status at `http://127.0.0.1:4040` in your browser if ngrok started successfully.
-   **Port 5000 already in use:**
    -   Ensure no other application is using port 5000 before running the script.
-   **`jq` command not found:**
    -   Install `jq` or rely on the script's log parsing fallback (which may be less stable).
    -   The script will still attempt to run without `jq`.
-   **Python or Flask not found:**
    -   Make sure Python 3 and Flask are correctly installed.
    ```
